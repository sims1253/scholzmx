---
import '../styles/global.css';
import BotanicalBorder from '../components/BotanicalBorder.astro';
import PaperGrain from '../components/PaperGrain.astro';
import IllustratedFooter from '../components/IllustratedFooter.astro';

export interface Props {
  title: string;
  description?: string;
  image?: string;
  addBorders?: boolean;
  footerVariant?: 'garden' | 'kitchen' | 'craft' | 'writing' | 'default';
}

const { 
  title, 
  description = "A digital garden and personal website - thoughtful, slow web principles with a warm, botanical aesthetic.",
  image = "/img/og-default.jpg",
  addBorders = true,
  footerVariant = 'default'
} = Astro.props;

const currentPath = Astro.url.pathname;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={Astro.url} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={image} />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={Astro.url} />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content={image} />

    <!-- Creative Commons License -->
    <link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" />
    
    <!-- Preload critical local font files -->
    <link rel="preload" href="/fonts/eb-garamond-400.woff2" as="font" type="font/woff2" crossorigin />
    <link rel="preload" href="/fonts/cormorant-garamond-600.woff2" as="font" type="font/woff2" crossorigin />
    
    <title>{title}</title>
    
  </head>
  
  <body>
    <div class="page-wrapper">
      <!-- Organic botanical borders and paper texture -->
      {addBorders && (
        <>
          <PaperGrain pattern="grain" intensity="subtle" />
          <BotanicalBorder position="top" variant="vine" intensity="light" />
          <BotanicalBorder position="left" variant="vine" intensity="light" />
          <BotanicalBorder position="right" variant="vine" intensity="light" />
          <BotanicalBorder position="corner" />
          <BotanicalBorder position="corner" />
          <BotanicalBorder position="corner" />
          <BotanicalBorder position="corner" />
        </>
      )}
      
      <!-- Integrated manuscript-style navigation -->
      <nav class="manuscript-nav" role="navigation" aria-label="Main navigation">
        <div class="nav-scroll">
          <div class="nav-brand">
            <a href="/" class="site-logo" aria-label="Home">
              <span class="logo-text">Scholz MX</span>
              <span class="logo-flourish">❦</span>
            </a>
          </div>
          
          <div class="nav-links">
            <a href="/" class={currentPath === '/' ? 'nav-link active' : 'nav-link'}>Garden</a>
            <span class="nav-separator">·</span>
            <a href="/blog" class={currentPath.startsWith('/blog') ? 'nav-link active' : 'nav-link'}>Writing</a>
            <span class="nav-separator">·</span>
            <a href="/recipes" class={currentPath.startsWith('/recipes') ? 'nav-link active' : 'nav-link'}>Kitchen</a>
            <span class="nav-separator">·</span>
            <a href="/projects" class={currentPath.startsWith('/projects') ? 'nav-link active' : 'nav-link'}>Craft</a>
            <span class="nav-separator">·</span>
            <a href="/about" class={currentPath === '/about' ? 'nav-link active' : 'nav-link'}>About</a>
          </div>
        </div>
      </nav>

      <!-- Main content area -->
      <main class="main-content">
        <div class="container">
          <slot />
        </div>
      </main>

      <!-- Illustrated Footer -->
      <IllustratedFooter variant={footerVariant} />
    </div>
    
    <style>
      /* Manuscript-style navigation */
      .manuscript-nav {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 100;
        background: linear-gradient(to bottom, rgba(250, 247, 240, 0.98), rgba(250, 247, 240, 0.92));
        backdrop-filter: blur(8px);
        border-bottom: 1px solid rgba(139, 90, 60, 0.08);
        padding: var(--space-xs) 0;
      }

      .nav-scroll {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 var(--space-md);
      }

      .nav-brand .site-logo {
        display: flex;
        align-items: center;
        gap: var(--space-xs);
        text-decoration: none;
        font-family: var(--font-heading);
        font-size: var(--text-xl);
        font-weight: 700;
        color: var(--color-ink-dark);
        transition: all var(--transition-medium);
      }

      .nav-brand .site-logo:hover {
        color: var(--color-walnut);
        transform: translateY(-1px);
      }

      .logo-flourish {
        color: var(--color-gold);
        font-size: 1.2em;
        transition: transform var(--transition-medium);
      }

      .site-logo:hover .logo-flourish {
        transform: rotate(20deg) scale(1.1);
      }

      .nav-links {
        display: flex;
        align-items: center;
        gap: 0;
        font-size: var(--text-sm);
        font-family: var(--font-heading);
      }

      .nav-link {
        text-decoration: none;
        color: var(--color-ink-light);
        padding: var(--space-xs) var(--space-sm);
        transition: all var(--transition-fast);
        font-weight: 400;
        letter-spacing: 0.01em;
        position: relative;
      }

      .nav-link:hover {
        color: var(--color-walnut);
      }

      .nav-link.active {
        color: var(--color-walnut);
        font-weight: 500;
      }

      .nav-link.active::after {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 50%;
        transform: translateX(-50%);
        width: 60%;
        height: 1px;
        background-color: var(--color-gold);
      }

      .nav-separator {
        color: var(--color-ink-light);
        opacity: 0.5;
        margin: 0 var(--space-xs);
        font-weight: 300;
      }

      /* Main content */
      .page-wrapper {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      .main-content {
        flex: 1;
        padding: calc(50px + var(--space-md)) 0 var(--space-xl);
      }


      /* Mobile responsiveness */
      @media (max-width: 768px) {
        .nav-scroll {
          flex-direction: column;
          gap: var(--space-xs);
          padding: var(--space-xs) var(--space-md);
        }

        .nav-links {
          font-size: var(--text-xs);
        }

        .nav-link {
          padding: var(--space-xs);
        }

        .nav-separator {
          margin: 0 var(--space-xs);
        }

        .main-content {
          padding: calc(70px + var(--space-md)) 0 var(--space-xl);
        }
      }

      @media (max-width: 480px) {
        .nav-links {
          flex-wrap: wrap;
          justify-content: center;
          gap: var(--space-xs);
        }

        .nav-separator {
          display: none;
        }
      }
    </style>
  </body>
</html>