@layer components {
/* Demo Garden scoped styles (self-contained via .dg-* namespace) */

.dg-root {
  position: relative;
  isolation: isolate;
}

/* Subtle paper texture overlay */
.dg-root[data-dg-texture]::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background:
    url("/demo/textures/paper-grain.svg") center/800px 800px repeat,
    radial-gradient(circle at 80% 10%, color-mix(in srgb, var(--color-verdigris) 4%, transparent), transparent 60%),
    radial-gradient(circle at 12% 40%, color-mix(in srgb, var(--color-tansy) 3%, transparent), transparent 60%);
  opacity: 0.4;
  mix-blend-mode: multiply;
  z-index: -1;
}

/* Ambient floating particles */
.dg-root[data-dg-particles]::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(circle, color-mix(in srgb, var(--color-ink-light) 20%, transparent) 0 2px, transparent 3px) 0 0/140px 220px,
    radial-gradient(circle, color-mix(in srgb, var(--color-ink-light) 10%, transparent) 0 1px, transparent 2px) 40px 80px/160px 260px;
  opacity: 0.12;
  animation: dg-float 18s linear infinite;
  z-index: -1;
}

@media (prefers-reduced-motion: reduce) {
  .dg-root[data-dg-particles]::after { animation: none; }
}

@keyframes dg-float {
  from { transform: translateY(0); }
  to { transform: translateY(-6%); }
}

/* Sunlit (lightweight) */
.dg-sunlit-scene {
  position: relative;
  height: 200px;
  border-radius: 12px;
  overflow: hidden;
  background: linear-gradient(180deg, color-mix(in srgb, var(--color-parchment-light) 92%, var(--color-walnut)), var(--color-parchment-light));
  box-shadow:
    inset 0 0 80px color-mix(in srgb, var(--color-ochre) 6%, transparent),
    0 8px 24px color-mix(in srgb, var(--color-walnut) 8%, transparent);
}
.dg-shutters {
  position: absolute;
  inset: 0;
  display: grid;
  grid-template-columns: repeat(10, 1fr);
  opacity: 0.65;
}
.dg-shutter {
  background: linear-gradient(180deg, rgba(0,0,0,0.08), rgba(0,0,0,0));
  mix-blend-mode: multiply;
}
.dg-sun-glow {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(40% 60% at 80% 20%, rgba(255, 190, 120, 0.22), transparent 70%),
    radial-gradient(30% 40% at 60% 0%, rgba(255, 225, 170, 0.18), transparent 70%);
  filter: blur(12px);
}
/* Additional left-biased glow to avoid static half */
.dg-sun-glow-left {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(45% 60% at 20% 30%, rgba(255, 210, 140, 0.18), transparent 70%),
    radial-gradient(30% 40% at 30% 10%, rgba(255, 235, 190, 0.16), transparent 70%);
  filter: blur(14px);
}
@media (prefers-reduced-motion: no-preference) {
  .dg-sunlit-scene[data-enabled='on'] .dg-sun-glow { animation: dg-sunrise 16s ease-in-out infinite alternate; }
  .dg-sunlit-scene[data-enabled='on'] .dg-sun-glow-left { animation: dg-sunrise-left 18s ease-in-out infinite alternate; }
}
@keyframes dg-sunrise {
  0% { transform: translateY(8px); opacity: 0.8; }
  50% { transform: translateY(-6px); opacity: 1; }
  100% { transform: translateY(4px); opacity: 0.85; }
}
@keyframes dg-sunrise-left {
  0% { transform: translate(-6px, 6px); opacity: 0.75; }
  50% { transform: translate(4px, -4px); opacity: 0.95; }
  100% { transform: translate(-2px, 3px); opacity: 0.85; }
}
.dg-sunlit-note { color: var(--color-text-secondary); margin-top: var(--space-sm); }
/* Progressive blur bands (sunlit) */
.dg-progressive-blur { position: absolute; inset: 0; }
.dg-progressive-blur .layer {
  position: absolute; inset: 0;
  backdrop-filter: blur(var(--dg-blur, 0));
  -webkit-backdrop-filter: blur(var(--dg-blur, 0));
  mask-image: linear-gradient(252deg, transparent, transparent var(--stop1, 0%), black var(--stop2, 0%), black);
}
.dg-progressive-blur .l1 { --dg-blur: 6px; --stop1: 0%; --stop2: 0%; }
.dg-progressive-blur .l2 { --dg-blur: 12px; --stop1: 40%; --stop2: 80%; }
.dg-progressive-blur .l3 { --dg-blur: 24px; --stop1: 40%; --stop2: 70%; }
.dg-progressive-blur .l4 { --dg-blur: 40px; --stop1: 70%; --stop2: 80%; }
@media (prefers-reduced-motion: no-preference) {
  .dg-sunlit-scene[data-enabled='on'] .dg-progressive-blur .layer { animation: dg-band-sway 16s ease-in-out infinite alternate; }
}
@keyframes dg-band-sway {
  0% { transform: translateX(0px); }
  50% { transform: translateX(6px); }
  100% { transform: translateX(-4px); }
}

/* Leaf billowing sprite (lightweight) */
.dg-leaves { position: absolute; inset: 0; overflow: hidden; }
.dg-leaf-sprite {
  position: absolute;
  bottom: -20px; right: -300px; width: 640px; height: 480px;
  background-image: url("/demo/textures/doodles.svg");
  background-size: cover; background-repeat: no-repeat;
  filter: url(#dg-wind);
}
@media (prefers-reduced-motion: no-preference) {
  .dg-sunlit-scene[data-enabled='on'] .dg-leaf-sprite { animation: dg-billow 18s ease-in-out infinite; }
}
@keyframes dg-billow {
  0% { transform: perspective(400px) rotateX(0deg) rotateY(0deg) scale(1); }
  25% { transform: perspective(400px) rotateX(1deg) rotateY(2deg) scale(1.02); }
  50% { transform: perspective(400px) rotateX(-4deg) rotateY(-2deg) scale(0.98); }
  75% { transform: perspective(400px) rotateX(1deg) rotateY(-1deg) scale(1.03); }
  100% { transform: perspective(400px) rotateX(0deg) rotateY(0deg) scale(1); }
}

/* Hero */
.dg-hero {
  padding: var(--space-xxl) 0 var(--space-xl);
  position: relative;
}

.dg-hero-surface {
  position: relative;
  border-radius: var(--border-radius-lg);
  padding: var(--space-xl) var(--space-lg);
  background:
    url("/demo/textures/watercolor-blob.svg") center/cover no-repeat,
    var(--color-surface);
  box-shadow:
    0 12px 36px color-mix(in srgb, var(--color-walnut) 6%, transparent),
    0 2px 10px color-mix(in srgb, var(--color-sage) 16%, transparent),
    inset 0 1px 0 color-mix(in srgb, var(--color-parchment-light) 70%, white);
}
/* Sketched logo accent (garden2-like) */
.dg-logo-scribble {
  position: absolute;
  top: -14px; left: -12px;
  width: 80px; height: 24px;
  background: url("/demo/textures/scribble.svg") center/contain no-repeat;
  opacity: 0.35;
  transform: rotate(-8deg);
}
.dg-hero-title { position: relative; }
.dg-hero-title::after {
  content: "";
  position: absolute;
  left: 0; right: 0; bottom: -8px; height: 14px;
  background: url("/demo/textures/scribble.svg") center/contain no-repeat;
  opacity: 0; transition: opacity 250ms ease;
}
.dg-hero-surface:hover .dg-hero-title::after { opacity: 0.55; }

.dg-hero-title {
  font-family: var(--font-heading);
  letter-spacing: 0.02em;
  margin: 0 0 var(--space-sm);
}

.dg-hero-subtitle { margin: 0; color: var(--color-text-secondary); }

/* Demo nav showcase */
.dg-nav-showcase { padding: var(--space-lg) 0; }
.dg-nav {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  flex-wrap: wrap;
}
.dg-nav-link {
  position: relative;
  text-decoration: none;
  color: var(--color-ink-light);
  padding: 2px 6px;
  border-radius: 4px;
}
.dg-nav-link::after {
  content: "";
  position: absolute;
  left: 6%;
  right: 6%;
  bottom: -4px;
  height: 6px;
  background: url("/demo/textures/scribble.svg") center/100% 100% no-repeat;
  transform: scaleX(0);
  transform-origin: center;
  transition: transform 150ms ease-out;
}
.dg-nav-link:hover { color: var(--color-walnut); }
.dg-nav-link:hover::after { transform: scaleX(1); }

/* Scribble hover note */
.dg-nav-link--note::before {
  content: attr(data-note);
  position: absolute;
  top: -1.6rem;
  left: 50%;
  transform: translateX(-50%) rotate(-2deg);
  font-family: var(--font-ui);
  font-size: var(--text-xs);
  color: color-mix(in srgb, var(--color-ink-light) 80%, transparent);
  background: color-mix(in srgb, var(--color-parchment-light) 70%, white);
  padding: 2px 6px;
  border: 1px dashed color-mix(in srgb, var(--color-lichen) 60%, transparent);
  border-radius: 3px;
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--transition-fast);
}
.dg-nav-link--note:hover::before { opacity: 1; }
.dg-nav-link--note:hover { transform: translateY(-1px); }
@media (prefers-reduced-motion: no-preference) {
  .dg-nav-link--note:hover::before {
    animation: dg-note-wobble 800ms ease-in-out both;
  }
}
@keyframes dg-note-wobble {
  0% { transform: translateX(-50%) rotate(-2deg); }
  30% { transform: translateX(calc(-50% - 2px)) rotate(-4deg); }
  60% { transform: translateX(calc(-50% + 2px)) rotate(1deg); }
  100% { transform: translateX(-50%) rotate(-2deg); }
}
.dg-nav-sep { opacity: 0.5; color: var(--color-ink-light); }

/* Sections */
.dg-section { padding: var(--space-xl) 0; }
.dg-section-title { margin: 0 0 var(--space-md); color: var(--color-walnut); }
/* Hand-drawn doodles (garden5-like) */
.dg-doodle {
  position: absolute;
  width: 24px; height: 24px;
  background: url("/demo/textures/doodles-g5.svg") 0 0/160px 40px no-repeat;
  opacity: 0.55;
  pointer-events: none;
}
.dg-doodle.a { background-position: 0 0; transform: rotate(-4deg); }
.dg-doodle.b { background-position: -40px 0; transform: rotate(2deg); }
.dg-doodle.c { background-position: -80px 0; transform: rotate(-6deg); }
.dg-doodle.d { background-position: -120px 0; transform: rotate(4deg); }
.dg-doodle--sprig {
  position: absolute;
  width: 28px; height: 28px;
  background: url("/demo/textures/plant-sprig.svg") center/contain no-repeat;
  opacity: 0.5;
  pointer-events: none;
}
.dg-section-title { position: relative; }
.dg-section-title .dg-doodle { left: -22px; top: -6px; }
.dg-hero-surface .dg-doodle { top: -14px; left: -16px; }
.dg-dropcap-quote { position: relative; }
.dg-dropcap-quote .dg-doodle--sprig { left: -28px; top: 10px; }
.dg-corner-doodle {
  position: fixed;
  top: 10px; left: 8px;
  width: 28px; height: 28px;
  background: url("/demo/textures/doodles-g5.svg") -40px 0/160px 40px no-repeat;
  opacity: 0.35;
  pointer-events: none;
  z-index: 5;
}
.dg-pressed {
  background:
    url("/demo/textures/paper-grain.svg") center/800px 800px repeat,
    radial-gradient(70% 40% at 10% 10%, color-mix(in srgb, var(--color-lichen) 10%, transparent), transparent 70%);
}
.dg-remedies {
  background:
    url("/demo/textures/paper-fiber.svg") center/700px 700px repeat,
    radial-gradient(60% 35% at 80% 10%, color-mix(in srgb, var(--color-tansy) 8%, transparent), transparent 70%);
}
.dg-specimens {
  background:
    url("/demo/textures/paper-grain.svg") center/700px 700px repeat,
    radial-gradient(50% 30% at 30% 90%, color-mix(in srgb, var(--color-verdigris) 6%, transparent), transparent 70%);
}

/* Card stack */
.dg-card-stack {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(16rem, 1fr));
  gap: var(--space-md);
}
.dg-card {
  position: relative;
  background: var(--color-surface);
  border: 1px solid color-mix(in srgb, var(--color-lichen) 40%, transparent);
  border-radius: 10px;
  padding: var(--space-md);
  box-shadow:
    0 10px 22px color-mix(in srgb, var(--color-walnut) 6%, transparent),
    0 1px 3px color-mix(in srgb, var(--color-sage) 18%, transparent),
    inset 0 1px 0 color-mix(in srgb, var(--color-parchment-light) 70%, white);
  transform: translate(var(--dg-offx, 0), var(--dg-offy, 0));
  transition: transform 150ms ease, box-shadow 150ms ease;
  /* Per-card texture/patina is set on specific nth-child rules below */
}

/* Stacked note layers behind each card (Attic 2 vibe) */
.dg-card::before,
.dg-card::after {
  content: "";
  position: absolute;
  inset: 6px;
  border-radius: 8px;
  background: var(--color-surface);
  border: 1px solid color-mix(in srgb, var(--color-lichen) 35%, transparent);
  box-shadow:
    0 2px 6px color-mix(in srgb, var(--color-walnut) 8%, transparent),
    inset 0 1px 0 color-mix(in srgb, var(--color-parchment-light) 60%, white);
  z-index: -1;
}
.dg-card::before { transform: rotate(-1.6deg) translate(-2px, 3px); }
.dg-card::after { transform: rotate(1.2deg) translate(2px, 1px); }
.dg-card:nth-child(1) {
  --dg-offx: -3px; --dg-offy: 2px;
  background-image:
    url("/demo/textures/paper-grain.svg");
  background-repeat: repeat;
  background-size: 700px 700px;
}
.dg-card:nth-child(2) {
  --dg-offx: 2px; --dg-offy: -2px;
  background-image:
    url("/demo/textures/paper-fiber.svg");
  background-repeat: repeat;
  background-size: 700px 700px;
}
.dg-card:nth-child(3) {
  --dg-offx: -1px; --dg-offy: 1px;
  background-image:
    url("/demo/textures/paper-grain.svg"),
    url("/demo/textures/coffee-ring.svg");
  background-repeat: repeat, no-repeat;
  background-size: 700px 700px, 160px 160px;
  background-position: center, right 18px bottom 14px;
}
.dg-card:nth-child(4) {
  background-image:
    url("/demo/textures/paper-fiber.svg"),
    url("/demo/textures/watercolor-blob.svg");
  background-repeat: repeat, no-repeat;
  background-size: 700px 700px, cover;
  background-position: center, 40% 30%;
}
.dg-card:hover {
  /* Keep stacked card stationary on hover */
  transform: translate(var(--dg-offx, 0), var(--dg-offy, 0));
  box-shadow:
    0 10px 22px color-mix(in srgb, var(--color-walnut) 6%, transparent),
    0 1px 3px color-mix(in srgb, var(--color-sage) 18%, transparent),
    inset 0 1px 0 color-mix(in srgb, var(--color-parchment-light) 70%, white);
}
.dg-card-hd { margin-bottom: var(--space-sm); }
.dg-card-kicker { font-size: var(--text-xs); color: var(--color-ink-light); }
.dg-card-title { margin: 0.25rem 0 0; }
.dg-card-ft { margin-top: var(--space-sm); }
.dg-card .dg-plant-sprig {
  position: absolute;
  width: 36px;
  height: 36px;
  bottom: 10px;
  left: 12px;
  background: url("/demo/textures/plant-sprig.svg") center/contain no-repeat;
  opacity: 0.35;
}

.dg-ghost-btn {
  background: transparent;
  border: 1px solid color-mix(in srgb, var(--color-lichen) 60%, transparent);
  color: var(--color-ink-light);
  padding: 6px 10px;
  border-radius: 999px;
}
.dg-card--bookmark::after {
  content: "";
  position: absolute;
  top: -2px;
  right: 12px;
  width: 16px;
  height: 22px;
  background:
    linear-gradient(var(--color-tansy), color-mix(in srgb, var(--color-tansy) 70%, var(--color-walnut)));
  clip-path: polygon(0 0, 100% 0, 100% 80%, 50% 100%, 0 80%);
  box-shadow: 0 1px 2px color-mix(in srgb, var(--color-walnut) 30%, transparent);
}
.dg-card--bookmark-left::after {
  left: 12px; right: auto;
}

/* Taped note variant */
.dg-card--taped::before,
.dg-card--taped::after {
  content: "";
  position: absolute;
  width: 42px;
  height: 14px;
  background: color-mix(in srgb, var(--color-lichen) 30%, var(--color-parchment-light));
  top: -8px;
  transform: rotate(-4deg);
  left: 14px;
  box-shadow: 0 1px 3px color-mix(in srgb, var(--color-walnut) 20%, transparent);
  opacity: 0.85;
}

/* Small doodle icon on card titles */
.dg-card-title {
  position: relative;
  padding-left: 24px;
}
.dg-card-title::before {
  content: "";
  position: absolute;
  left: 0;
  top: 2px;
  width: 18px;
  height: 18px;
  background: url("/demo/textures/doodles.svg") 0 0/160px 160px no-repeat;
  opacity: 0.7;
}
.dg-card:nth-child(2) .dg-card-title::before { background-position: -40px 0; }
.dg-card:nth-child(3) .dg-card-title::before { background-position: -80px 0; }
.dg-card:nth-child(4) .dg-card-title::before { background-position: -120px 0; }
.dg-card--taped::after {
  left: auto;
  right: 16px;
  transform: rotate(3deg);
}

/* Remedies grid */
.dg-remedy-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(16rem, 1fr));
  gap: var(--space-md);
}
.dg-remedy {
  position: relative;
  background: var(--color-surface);
  border: 1px solid color-mix(in srgb, var(--color-lichen) 40%, transparent);
  border-radius: 10px;
  padding: var(--space-md);
  box-shadow:
    0 10px 22px color-mix(in srgb, var(--color-walnut) 6%, transparent),
    0 1px 3px color-mix(in srgb, var(--color-sage) 18%, transparent),
    inset 0 1px 0 color-mix(in srgb, var(--color-parchment-light) 70%, white);
  background-image: url("/demo/textures/paper-grain.svg");
  background-repeat: repeat;
  background-size: 700px 700px;
  transform: translate(var(--dg-offx, 0), var(--dg-offy, 0));
  transition: none;
}
/* Stacked paper layers behind remedy cards (match Recently Pressed) */
.dg-remedy::before,
.dg-remedy::after {
  content: "";
  position: absolute;
  inset: 6px;
  border-radius: 8px;
  background: var(--color-surface);
  border: 1px solid color-mix(in srgb, var(--color-lichen) 35%, transparent);
  box-shadow:
    0 2px 6px color-mix(in srgb, var(--color-walnut) 8%, transparent),
    inset 0 1px 0 color-mix(in srgb, var(--color-parchment-light) 60%, white);
  z-index: -1;
}
.dg-remedy::before { transform: rotate(-1.2deg) translate(-2px, 2px); }
.dg-remedy::after { transform: rotate(0.9deg) translate(2px, 1px); }
.dg-remedy:hover { transform: none; }

/* Per-card organic offsets and textures */
.dg-remedy:nth-child(1) { --dg-offx: -3px; --dg-offy: 2px; }
.dg-remedy:nth-child(2) {
  --dg-offx: 2px; --dg-offy: -2px;
  background-image: url("/demo/textures/paper-fiber.svg");
}
.dg-remedy:nth-child(3) {
  --dg-offx: -1px; --dg-offy: 1px;
  background-image:
    url("/demo/textures/paper-grain.svg"),
    url("/demo/textures/coffee-ring.svg");
  background-repeat: repeat, no-repeat;
  background-size: 700px 700px, 140px 140px;
  background-position: center, right 14px bottom 12px;
}
.dg-remedy:nth-child(4) {
  --dg-offx: 1px; --dg-offy: -1px;
  background-image:
    url("/demo/textures/paper-fiber.svg"),
    url("/demo/textures/watercolor-blob.svg");
  background-repeat: repeat, no-repeat;
  background-size: 700px 700px, cover;
}
.dg-remedy-title { margin: 0 0 var(--space-xs); }

/* Garden.html-like hover reveal notes */
.dg-annotate {
  position: relative;
  display: inline-block;
  color: var(--color-walnut);
  cursor: pointer;
}
.dg-annotate::after {
  content: "";
  position: absolute;
  left: 0; right: 0; bottom: -2px; height: 2px;
  background: linear-gradient(90deg, var(--color-ochre), transparent);
  opacity: 0.6;
  transition: height 200ms ease, opacity 200ms ease;
}
.dg-annotate:hover::after { height: 4px; opacity: 1; }
.dg-reveal {
  opacity: 0; transform: translateY(8px);
  transition: opacity 300ms ease, transform 300ms ease;
  margin-top: var(--space-xs);
  background: var(--color-surface);
  border: 1px dashed color-mix(in srgb, var(--color-lichen) 60%, transparent);
  border-radius: 6px;
  padding: var(--space-xs);
}
.dg-annotate:hover + .dg-reveal,
.dg-reveal:hover { opacity: 1; transform: translateY(0); }

/* Scribble divider */
.dg-scribble-divider {
  height: 28px;
  margin: var(--space-lg) 0;
  background: url("/demo/textures/scribble.svg") center/contain no-repeat;
  opacity: 0.6;
}

/* Specimens */
.dg-specimen-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--space-md);
}
@container page (inline-size <= 42rem) {
  .dg-specimen-grid { grid-template-columns: 1fr; }
}
.dg-specimen {
  margin: 0;
  background: var(--color-surface);
  border: 1px solid color-mix(in srgb, var(--color-lichen) 40%, transparent);
  border-radius: 10px;
  padding: var(--space-md);
  display: grid;
  gap: var(--space-xs);
}
.dg-specimen-frame {
  height: 140px;
  border: 1px dashed color-mix(in srgb, var(--color-lichen) 60%, transparent);
  border-radius: 8px;
  background:
    url("/demo/textures/specimen-fern.svg") center/contain no-repeat,
    url("/demo/textures/watercolor-blob.svg") center/cover no-repeat,
    url("/demo/textures/paper-grain.svg") center/600px 600px repeat;
}
.dg-specimen:nth-child(2) .dg-specimen-frame {
  background:
    url("/demo/textures/specimen-flower.svg") center/contain no-repeat,
    url("/demo/textures/watercolor-blob.svg") center/cover no-repeat,
    url("/demo/textures/paper-fiber.svg") center/600px 600px repeat;
}
.dg-specimen:nth-child(3) .dg-specimen-frame {
  background:
    url("/demo/textures/specimen-label.svg") center/contain no-repeat,
    url("/demo/textures/watercolor-blob.svg") center/cover no-repeat,
    url("/demo/textures/paper-grain.svg") center/600px 600px repeat;
}
.dg-specimen:nth-child(4) .dg-specimen-frame {
  background:
    url("/demo/textures/specimen-paper.svg") center/contain no-repeat,
    url("/demo/textures/watercolor-blob.svg") center/cover no-repeat,
    url("/demo/textures/paper-fiber.svg") center/600px 600px repeat;
}
.dg-specimen figcaption { color: var(--color-text-secondary); font-size: var(--text-sm); }

/* Dropcap quote */
.dg-dropcap-quote {
  position: relative;
  margin: 0;
  padding: var(--space-lg);
  background: var(--color-surface);
  border-left: 4px solid var(--color-tansy);
  border-radius: 0 var(--border-radius) var(--border-radius) 0;
  box-shadow:
    0 10px 22px color-mix(in srgb, var(--color-walnut) 6%, transparent),
    0 1px 3px color-mix(in srgb, var(--color-sage) 18%, transparent),
    inset 0 1px 0 color-mix(in srgb, var(--color-parchment-light) 70%, white);
}
.dg-dropcap-quote p {
  margin: 0 0 var(--space-xs);
  font-style: italic;
}
.dg-dropcap-quote p::first-letter {
  font-family: var(--font-dropcap-foreground);
  font-size: 3.2rem;
  line-height: 0.8;
  color: var(--color-ink-plate);
  margin-right: 0.25rem;
  position: relative;
  z-index: 1;
}
.dg-dropcap-quote p::before {
  content: "";
  position: absolute;
  width: 3.2rem;
  height: 3.2rem;
  left: var(--space-lg);
  top: calc(var(--space-lg) - 0.4rem);
  background: radial-gradient(circle at 60% 40%, color-mix(in srgb, var(--color-ochre) 40%, transparent), transparent 60%);
  filter: blur(10px);
}
.dg-dropcap-quote cite { display: block; color: var(--color-text-muted); }

/* Card-specific dropcap (Attic 3 warmer initial) */
.dg-card--initial p:first-of-type::first-letter {
  font-family: var(--font-dropcap-foreground);
  font-size: 2.2rem;
  line-height: 0.8;
  color: var(--color-ochre);
  margin-right: 0.2rem;
  position: relative;
}
.dg-card--initial p:first-of-type { margin-top: 0.2rem; }

/* Falling blossoms/leaves (Garden4) */
.dg-fall { position: fixed; inset: 0; pointer-events: none; z-index: 0; }
.dg-petal {
  position: absolute;
  width: 8px; height: 12px;
  border-radius: 60% 40% 60% 40% / 60% 40% 60% 40%;
  background: color-mix(in srgb, var(--color-tansy) 70%, white);
  opacity: 0.18;
  filter: blur(0.2px);
  animation: dg-fall 14s linear infinite;
}
.dg-petal:nth-child(2) { width: 6px; height: 10px; animation-duration: 18s; animation-delay: 2s; }
.dg-petal:nth-child(3) { width: 7px; height: 11px; animation-duration: 20s; animation-delay: 6s; }
.dg-petal:nth-child(4) { width: 9px; height: 13px; animation-duration: 22s; animation-delay: 4s; }
.dg-petal:nth-child(5) { width: 7px; height: 10px; animation-duration: 16s; animation-delay: 1s; }
@keyframes dg-fall {
  0% { transform: translate3d(10vw, -5vh, 0) rotate(0deg); }
  50% { transform: translate3d(50vw, 50vh, 0) rotate(120deg); }
  100% { transform: translate3d(90vw, 105vh, 0) rotate(240deg); }
}
@media (prefers-reduced-motion: reduce) {
  .dg-petal { animation: none; display: none; }
}

/* Handwritten marginalia (Garden5) */
.dg-script { font-family: var(--font-ui); font-style: italic; color: var(--color-ink-light); opacity: 0.6; }
.dg-handword { position: absolute; user-select: none; transform: rotate(-4deg); }
.dg-handword.a { top: -10px; right: 8px; }
.dg-handword.b { bottom: -12px; left: 12px; }

/* Logo reveal (Garden5) */
.dg-logo-reveal { position: relative; display: inline-block; margin-top: var(--space-sm); }
.dg-logo-reveal .mask {
  position: absolute; inset: 0;
  background: linear-gradient(90deg, var(--color-parchment-light), transparent 60%);
  opacity: 0.75; transition: opacity 300ms ease;
}
.dg-logo-reveal:hover .mask { opacity: 0; }

/* Margin notes & inline highlight */
.dg-margins-wrap {
  position: relative;
}
.dg-mark {
  background: radial-gradient(60% 60% at 50% 50%, color-mix(in srgb, var(--color-ochre) 24%, transparent) 40%, transparent 70%);
  padding: 0 2px;
  box-decoration-break: clone;
}
.dg-mnote-anchor { margin-left: 0.2rem; color: var(--color-ink-light); }
.dg-mnote {
  margin-top: var(--space-xs);
  color: var(--color-text-secondary);
  font-size: var(--text-sm);
}
@media (min-width: 1100px) {
  .dg-margins-wrap { padding-right: calc(var(--sidebar-width)); }
  .dg-mnote {
    position: absolute;
    right: calc(-1 * var(--sidebar-width) + 8px);
    top: 0.1rem;
    width: calc(var(--sidebar-width) - 8px);
  }
}

/* Botanical vignette */
.dg-vignette {
  position: fixed;
  inset: 0;
  pointer-events: none;
}
.dg-leaf {
  position: absolute;
  width: 18px;
  height: 28px;
  border-radius: 40% 60% 40% 60% / 60% 40% 60% 40%;
  background: linear-gradient(180deg, var(--color-moss), color-mix(in srgb, var(--color-moss) 70%, var(--color-walnut)));
  opacity: 0.12;
  filter: blur(0.2px);
}
.dg-leaf-a { left: 18px; top: 22vh; transform: rotate(-18deg); }
.dg-leaf-b { right: 24px; top: 12vh; transform: rotate(12deg); }
.dg-leaf-c { right: 8px; bottom: 18vh; transform: rotate(-4deg); }
}


