@layer components {
/* TWEAK: Core card presentation container */
.sc-card {
  position: relative;
  transform: translate(var(--offx, 0), var(--offy, 0));
  padding: 0;
  /* Theme-aware default wash base color */
  --wash-base: var(--color-sage);
}
@media (prefers-color-scheme: dark) {
  .sc-card { --wash-base: var(--color-walnut); }
}
/* TWEAK: Adds breathing room for top adornments */
/* Visible top face containing backgrounds and content */
.sc-face {
  position: relative;
  z-index: 1;
  border-radius: 10px;
  background: var(--color-surface);
  border: 1px solid color-mix(in srgb, var(--color-lichen) 40%, transparent);
  box-shadow:
    0 10px 22px color-mix(in srgb, var(--color-walnut) 6%, transparent),
    0 1px 3px color-mix(in srgb, var(--color-sage) 18%, transparent),
    inset 0 1px 0 color-mix(in srgb, var(--color-parchment-light) 70%, white);
  overflow: hidden; /* ensure overlays clip to rounded corners */
}
.sc-content { position: relative; z-index: 1; padding: var(--space-md); padding-top: calc(var(--space-md) + 6px); }

/* Stacked layers */
.sc-card::before,
.sc-card::after {
  content: "";
  position: absolute;
  /* TWEAK: Make back sheets slightly larger so they peek around the face */
  inset: -2px;
  border-radius: 10px;
  background: var(--color-surface);
  border: 1px solid color-mix(in srgb, var(--color-lichen) 35%, transparent);
  box-shadow:
    0 2px 6px color-mix(in srgb, var(--color-walnut) 8%, transparent),
    inset 0 1px 0 color-mix(in srgb, var(--color-parchment-light) 60%, white);
  z-index: -2;
}
.sc-card::before { transform: rotate(var(--rot-a, -1.2deg)) translate(-2px, 2px); }
.sc-card::after { transform: rotate(var(--rot-b, 1deg)) translate(2px, 1px); }

/* Prevent content overlap with top adornments */
.sc-title { padding-top: 2px; }

/* Single-layer simple card styling - inspired by "From the Notebook" section */
[data-layers="1"] .sc-face {
  background: color-mix(in srgb, var(--color-surface) 85%, transparent);
  backdrop-filter: blur(8px);
  border-radius: 2px;
  transform: rotate(-0.5deg);
}

/* Background shadow layer for single-layer cards */
[data-layers="1"]::before {
  content: "";
  position: absolute;
  inset: 0;
  background: color-mix(in srgb, var(--color-lichen) 25%, transparent);
  border-radius: 2px;
  transform: scale(1.03) rotate(1deg);
  z-index: -1;
}

/* Hide the multi-layer stacked pseudo-elements for single-layer cards */
[data-layers="1"]::after { display: none; }

/* Optional extra layers as elements when data-layers>=3 */
.sc-layer-c,
.sc-layer-d {
  position: absolute;
  inset: -1px;
  border-radius: 10px;
  background: var(--color-surface);
  border: 1px solid color-mix(in srgb, var(--color-lichen) 30%, transparent);
  box-shadow:
    0 2px 5px color-mix(in srgb, var(--color-walnut) 7%, transparent),
    inset 0 1px 0 color-mix(in srgb, var(--color-parchment-light) 55%, white);
  z-index: -3;
}
.sc-layer-c { transform: rotate(var(--rot-c, 0.6deg)) translate(1px, 1px); }
.sc-layer-d { transform: rotate(calc(var(--rot-c, 0.6deg) * -1)) translate(-1px, -1px); }

/* Do not show extra elements for sheet style */
[data-layers="1"] .sc-layer-c,
[data-layers="1"] .sc-layer-d { display: none; }

/* Background textures removed for better dark mode compatibility */
/* Watercolor blob overlay - super blurry filled circles with radial gradients */
.sc-card[data-wash]:not([data-wash="none"]) .sc-face::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  width: var(--wash-bleed, 240%);
  height: var(--wash-bleed, 240%);
  background-image:
    radial-gradient(
      circle var(--wash-r1, 240px) at var(--wash-x, 50%) var(--wash-y, 50%),
      color-mix(in srgb, var(--wash-base) calc(var(--wash-alpha, 0.6) * 100%), transparent) 0%,
      transparent 100%
    ),
    radial-gradient(
      circle var(--wash-r2, 180px) at var(--wash2-x, 60%) var(--wash2-y, 60%),
      color-mix(in srgb, var(--wash-base) calc(var(--wash-alpha, 0.6) * 60%), transparent) 0%,
      transparent 100%
    );
  background-repeat: no-repeat;
  background-size: 100% 100%, 100% 100%;
  background-position: center, center;
  transform: translate(calc(-50% + var(--wash-tx, 0)), calc(-50% + var(--wash-ty, 0)));
  border-radius: inherit;
  z-index: 0;
  pointer-events: none;
}

/* Ring effect overlay - subtle coffee ring or water mark style */
.sc-card[data-ring]:not([data-ring="none"]) .sc-face::before {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  width: calc(100% * var(--ring-scale, 0.9));
  height: calc(100% * var(--ring-scale, 0.9));
  background: radial-gradient(
    circle at 45% 35%,
    transparent 35%,
    color-mix(in srgb, var(--color-walnut) calc(var(--ring-alpha, 0.2) * 100%), transparent) 38%,
    color-mix(in srgb, var(--color-walnut) calc(var(--ring-alpha, 0.2) * 80%), transparent) 42%,
    transparent 45%
  );
  transform: translate(-50%, -50%) rotate(-15deg);
  border-radius: 50%;
  z-index: 0;
  pointer-events: none;
}

/* TWEAK: 2-layer stack shows only one back sheet */
[data-layers="2"]::after { content: none; }

/* Focus styles for accessibility */
.sc-link:focus {
  outline: 2px solid var(--color-tansy);
  outline-offset: 2px;
  border-radius: 2px;
}

/* Optional ornament (small doodle) */
.sc-ornament {
  position: absolute;
  width: 20px;
  height: 20px;
  bottom: 8px;
  left: 50%;
  transform: translateX(-50%);
  background: url("/demo/textures/doodles.svg") 0 0/160px 160px no-repeat;
  opacity: 0.5;
  pointer-events: none;
}
/* Simple sprite position variants based on index (0..3) */
[data-ornament-variant="1"] .sc-ornament { background-position: -40px 0; }
[data-ornament-variant="2"] .sc-ornament { background-position: -80px 0; }
[data-ornament-variant="3"] .sc-ornament { background-position: -120px 0; }

/* Leaf doodle ornament (replaces sprite for single-layer cards) */
.sc-leaf-doodle {
  position: absolute;
  bottom: 1rem;
  left: 50%;
  transform: translateX(-50%) rotate(-12deg);
  width: 2.5rem;
  height: 2.5rem;
  color: color-mix(in srgb, var(--color-walnut) 18%, transparent);
  opacity: 0.6;
  z-index: 1;
}

/* SVG Doodle base styling */
.sc-svg-doodle {
  position: absolute;
  width: 2rem;
  height: 2rem;
  isolation: isolate;
  opacity: 0.4;
  z-index: 1;
  pointer-events: none;
  /* Fallback for browsers without mask support */
  background-color: var(--color-walnut);
  opacity: 0.2;
  border-radius: 2px;
  /* Modern mask-based rendering for perfect transparency */
  background-color: var(--doodle-color, color-mix(in srgb, var(--color-walnut) 70%, transparent));
  opacity: 0.4;
  -webkit-mask-image: var(--doodle-src);
  mask-image: var(--doodle-src);
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;
  -webkit-mask-size: contain;
  mask-size: contain;
}

.sc-svg-doodle img {
  display: none;
}


/* SVG Doodle positioning */
.sc-svg-doodle.topLeft {
  top: 0.5rem;
  left: 0.5rem;
}

.sc-svg-doodle.topRight {
  top: 0.5rem;
  right: 0.5rem;
}

.sc-svg-doodle.bottomLeft {
  bottom: 0.5rem;
  left: 0.5rem;
}

.sc-svg-doodle.bottomRight {
  bottom: 0.5rem;
  right: 0.5rem;
}

.sc-svg-doodle.center {
  top: 50%;
  left: 50%;
  /* transform handled inline for proper composition with rotation/scale */
}

/* Specific doodle sizing adjustments */
.sc-svg-doodle.sc-berries {
  width: 1.8rem;
  height: 1.8rem;
}

.sc-svg-doodle.sc-fern {
  width: 2.2rem;
  height: 2.2rem;
}

.sc-svg-doodle.sc-lavender {
  width: 1.6rem;
  height: 1.6rem;
}

.sc-svg-doodle.sc-old-key {
  width: 2.5rem;
  height: 2.5rem;
  opacity: 0.3;
}

.sc-svg-doodle.sc-seed-pod {
  width: 1.9rem;
  height: 1.9rem;
}


/* Bookmark ribbon pinned to top edge */
.sc-bookmark {
  position: absolute;
  top: -2px;
  width: 24px; /* increased from 16px */
  height: 32px; /* increased from 22px */
  background: linear-gradient(var(--color-tansy), color-mix(in srgb, var(--color-tansy) 70%, var(--color-walnut)));
  clip-path: polygon(0 0, 100% 0, 100% 80%, 50% 100%, 0 80%);
  box-shadow: 0 1px 2px color-mix(in srgb, var(--color-walnut) 30%, transparent);
  z-index: 2;
}
.sc-bookmark.right { right: 12px; }
.sc-bookmark.left { left: 12px; }

/* Tape corners at top */
.sc-tape {
  position: absolute;
  width: 44px;
  height: 14px;
  top: -10px;
  background: color-mix(in srgb, var(--color-lichen) 30%, var(--color-parchment-light));
  box-shadow: 0 1px 3px color-mix(in srgb, var(--color-walnut) 20%, transparent);
  opacity: 0.85;
  z-index: 2;
}
.sc-tape.left { left: 14px; transform: rotate(-4deg); }
.sc-tape.right { right: 16px; transform: rotate(3deg); }

/* Small corner stickers */
.sc-sticker {
  position: absolute;
  width: 10px;
  height: 10px;
  background: color-mix(in srgb, var(--color-tansy) 35%, white);
  opacity: 0.45;
  border-radius: 2px;
  z-index: 2;
}
.sc-sticker.tr { top: 0; right: 0; transform: translate(6px, -6px) rotate(6deg); }
.sc-sticker.bl { bottom: 0; left: 0; transform: translate(-6px, 6px) rotate(-6deg); }

/* Top-right circular bookmark (different from the bookmark ribbon) */
.sc-circle-bookmark {
  position: absolute;
  top: 1.25rem;
  right: 2.5rem;
  width: 3.5rem;
  height: 3.5rem;
  border-radius: 50%;
  border: 1px solid color-mix(in srgb, var(--color-tansy) 15%, transparent);
  opacity: 0.15;
  transform: rotate(-3deg);
  z-index: 1;
}

/* Vertical tab accent */
.sc-tab {
  position: absolute;
  top: -0.5rem;
  right: 3rem;
  width: 1.5rem; /* increased from 1rem */
  height: 4rem; /* increased from 3rem */
  background: color-mix(in srgb, var(--color-tansy) 35%, transparent);
  transform: rotate(-3deg);
  z-index: 2;
}
.sc-link { display: block; color: inherit; text-decoration: none; }
.sc-title { margin: 0 0 var(--space-xs); font-family: var(--font-heading); font-size: var(--text-lg); color: var(--color-walnut); }
.sc-subtitle { margin: 0 0 var(--space-xs); color: var(--color-ink-light); font-size: var(--text-sm); }
}


