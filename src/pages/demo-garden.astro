---
import BaseLayout from "../layouts/BaseLayout.astro";
import "../styles/demo-garden.css";

const pageTitle = "Demo Garden";
const pageDescription = "A self-contained playground blending manuscript warmth with garden curiosities.";
---

<BaseLayout title={pageTitle} description={pageDescription} addBorders={true} personal={true}>
  <div class="dg-root" data-dg-texture data-dg-particles>
    <div class="dg-fall" aria-hidden="true">
      <span class="dg-petal"></span>
      <span class="dg-petal"></span>
      <span class="dg-petal"></span>
      <span class="dg-petal"></span>
      <span class="dg-petal"></span>
    </div>
    <!-- Hero -->
    <section class="dg-hero">
      <div class="dg-hero-surface">
        <h1 class="dg-hero-title">
          Grotto — Demo Garden
        </h1>
        <p class="dg-hero-subtitle">A warm, whimsical space to test layouts, textures, and tiny delights.</p>
        <span class="dg-logo-scribble" aria-hidden="true"></span>
        <span class="dg-handword dg-script a">Patience</span>
        <span class="dg-logo-reveal"><span class="mask" aria-hidden="true"></span>✶ Grotto ✶</span>
      </div>
    </section>

    <!-- Demo nav motif (isolated) -->
    <section class="dg-nav-showcase" aria-labelledby="dg-nav-heading">
      <h2 id="dg-nav-heading" class="dg-section-title">Navigation Motifs <span class="dg-doodle b" aria-hidden="true"></span></h2>
      <nav class="dg-nav" aria-label="Demo navigation">
        <a href="#pressed" class="dg-nav-link" data-note="notes">Pressed</a>
        <span class="dg-nav-sep">·</span>
        <a href="#remedies" class="dg-nav-link dg-nav-link--note" data-note="hover note">Remedies</a>
        <span class="dg-nav-sep">·</span>
        <a href="#specimens" class="dg-nav-link">Specimens</a>
        <span class="dg-nav-sep">·</span>
        <a href="#margins" class="dg-nav-link">Margins</a>
        <span class="dg-nav-sep">·</span>
        <a href="#quote" class="dg-nav-link">Quote</a>
      </nav>
    </section>

    <!-- Recently Pressed Discoveries -->
    <section id="pressed" class="dg-section dg-pressed">
      <h2 class="dg-section-title">Recently Pressed Discoveries <span class="dg-doodle a" aria-hidden="true"></span></h2>
      <div class="dg-card-stack">
        <article class="dg-card">
          <header class="dg-card-hd">
            <span class="dg-card-kicker">Field note</span>
            <h3 class="dg-card-title">On Parchment Grains</h3>
          </header>
          <p>Exploring subtle paper textures that add depth without distraction.</p>
          <footer class="dg-card-ft"><button class="dg-ghost-btn" type="button">Read note</button></footer>
          <i class="dg-plant-sprig" aria-hidden="true"></i>
        </article>
        <!-- bubbles emitter -->
        <span class="dg-bubbles" aria-hidden="true"></span>
        <article class="dg-card dg-card--bookmark dg-card--initial">
          <header class="dg-card-hd">
            <span class="dg-card-kicker">Specimen</span>
            <h3 class="dg-card-title">Coffee-ring Patina</h3>
          </header>
          <p>A gentle stain overlay to imply time and use—kept at whisper opacity.</p>
          <footer class="dg-card-ft"><button class="dg-ghost-btn" type="button">Open</button></footer>
          <i class="dg-plant-sprig" aria-hidden="true"></i>
        </article>
        <span class="dg-bubbles" aria-hidden="true"></span>
        <article class="dg-card dg-card--taped dg-card--bookmark-left">
          <header class="dg-card-hd">
            <span class="dg-card-kicker">Ephemera</span>
            <h3 class="dg-card-title">Stacked Fibers</h3>
          </header>
          <p>Fiber-rich stock with a soft watercolor wash—closer to Attic’s stacked notes.</p>
          <footer class="dg-card-ft"><button class="dg-ghost-btn" type="button">Peek</button></footer>
          <i class="dg-plant-sprig" aria-hidden="true"></i>
        </article>
        <span class="dg-bubbles" aria-hidden="true"></span>
        <article class="dg-card">
          <header class="dg-card-hd">
            <span class="dg-card-kicker">Curiosity</span>
            <h3 class="dg-card-title">Watercolor Wash</h3>
          </header>
          <p>Washed blob behind titles to break monotony and add warmth.</p>
          <footer class="dg-card-ft"><button class="dg-ghost-btn" type="button">Details</button></footer>
          <i class="dg-plant-sprig" aria-hidden="true"></i>
        </article>
        <span class="dg-bubbles" aria-hidden="true"></span>
      </div>
    </section>

    <div class="dg-scribble-divider" role="separator" aria-hidden="true"></div>

    <!-- Common Remedies: lift-on-hover + hidden notes (no-JS) -->
    <section id="remedies" class="dg-section dg-remedies">
      <h2 class="dg-section-title">Common Remedies <span class="dg-doodle c" aria-hidden="true"></span></h2>
      <div class="dg-remedy-grid">
        <article class="dg-remedy">
          <h3 class="dg-remedy-title">Margin Note Anchors</h3>
          <p>Use anchors and a side container to reveal commentary gracefully.</p>
          <span class="dg-annotate">View Preparation</span>
          <div class="dg-reveal">Consider auto-positioning to avoid collisions and respect line length.</div>
        </article>
        <article class="dg-remedy">
          <h3 class="dg-remedy-title">Accessible Hover</h3>
          <p>Instant hover, slow fade out—keeps the site feeling responsive yet calm.</p>
          <span class="dg-annotate">View Preparation</span>
          <div class="dg-reveal">All motion respects reduced-motion preferences; focus states remain clear.</div>
        </article>
        <article class="dg-remedy">
          <h3 class="dg-remedy-title">Organic Stacks</h3>
          <p>Irregular offsets to avoid rigid grids—small, human variations.</p>
          <span class="dg-annotate">View Preparation</span>
          <div class="dg-reveal">Limit randomness to 2–6px so it reads intentional, not sloppy.</div>
        </article>
      </div>
    </section>

    <!-- Margin notes + inline watercolor highlight (no-JS demo) -->
    <section id="margins" class="dg-section dg-margins" aria-labelledby="dg-margins-title">
      <h2 id="dg-margins-title" class="dg-section-title">Margin Notes</h2>
      <div class="dg-margins-wrap">
        <p>
          This paragraph demonstrates an inline <mark class="dg-mark">watercolor highlight</mark> for emphasis and a small
          anchored note<span class="dg-mnote-anchor" aria-hidden="true">*</span> that sits calmly in the margin on wide viewports.
        </p>
        <aside class="dg-mnote" role="note">Margin note: sized for readability, docks to the right when space allows.</aside>
      </div>
    </section>

    <!-- Specimens & Curiosities: sketched frames + micro-particles -->
    <section id="specimens" class="dg-section dg-specimens">
      <h2 class="dg-section-title">Specimens & Curiosities <span class="dg-doodle d" aria-hidden="true"></span></h2>
      <div class="dg-specimen-grid">
        <figure class="dg-specimen"><div class="dg-specimen-frame"></div><span class="dg-specimen-scribble a" aria-hidden="true"></span><figcaption>Fern sprig</figcaption></figure>
        <figure class="dg-specimen"><div class="dg-specimen-frame"></div><span class="dg-specimen-scribble b" aria-hidden="true"></span><figcaption>Pressed flower</figcaption></figure>
        <figure class="dg-specimen"><div class="dg-specimen-frame"></div><span class="dg-specimen-scribble c" aria-hidden="true"></span><figcaption>Scribbled label</figcaption></figure>
        <figure class="dg-specimen"><div class="dg-specimen-frame"></div><span class="dg-specimen-scribble d" aria-hidden="true"></span><figcaption>Paper scrap</figcaption></figure>
      </div>
    </section>

    <!-- Quote interlude with warm dropcap badge -->
    <section id="quote" class="dg-section dg-quote">
      <blockquote class="dg-dropcap-quote">
        <p>
          Within the quiet of a library, small discoveries glow like embers; we attend, and they reward us.
        </p>
        <cite>— Notes from the Grotto</cite>
        <span class="dg-handword dg-script b">a fleeting joy</span>
      </blockquote>
    </section>
    <!-- Sunlit effect (lightweight) -->
    <section id="sunlit" class="dg-section dg-sunlit" aria-labelledby="dg-sunlit-title">
      <h2 id="dg-sunlit-title" class="dg-section-title">Sunlit Experiment</h2>
      <button id="dgSunlitToggle" class="dg-ghost-btn" type="button" aria-pressed="true" style="margin-bottom: var(--space-sm)">Sunlit: On</button>
      <div class="dg-sunlit-scene" aria-hidden="true" data-enabled="on">
        <div class="dg-shutters">
          <div class="dg-shutter"></div>
          <div class="dg-shutter"></div>
          <div class="dg-shutter"></div>
          <div class="dg-shutter"></div>
          <div class="dg-shutter"></div>
        </div>
        <div class="dg-sun-glow"></div>
        <div class="dg-sun-glow-left"></div>
        <div class="dg-progressive-blur">
          <div class="layer l1"></div>
          <div class="layer l2"></div>
          <div class="layer l3"></div>
          <div class="layer l4"></div>
        </div>
        <div class="dg-leaves" aria-hidden="true">
          <svg width="0" height="0" style="position:absolute">
            <defs>
              <filter id="dg-wind" x="-20%" y="-20%" width="140%" height="140%">
                <feTurbulence type="fractalNoise" numOctaves="2" seed="1">
                  <animate attributeName="baseFrequency" dur="16s" keyTimes="0;0.33;0.66;1" values="0.005 0.003;0.01 0.009;0.008 0.004;0.005 0.003" repeatCount="indefinite" />
                </feTurbulence>
                <feDisplacementMap in="SourceGraphic">
                  <animate attributeName="scale" dur="20s" keyTimes="0;0.25;0.5;0.75;1" values="45;55;75;55;45" repeatCount="indefinite" />
                </feDisplacementMap>
              </filter>
            </defs>
          </svg>
          <div class="dg-leaf-sprite" aria-hidden="true"></div>
        </div>
      </div>
      <p class="dg-sunlit-note">Inspired by sunlit window effects; this version is CSS-only with gentle blur masks. See source links for richer variants.
      </p>
      <script>
        document.addEventListener('DOMContentLoaded', function () {
          var scene = document.querySelector('.dg-sunlit-scene');
          var btn = document.getElementById('dgSunlitToggle');
          if (!scene || !btn) return;
          function update() {
            var on = scene && scene.getAttribute('data-enabled') === 'on';
            btn && btn.setAttribute('aria-pressed', String(on));
            if (btn) btn.textContent = on ? 'Sunlit: On' : 'Sunlit: Off';
          }
          btn.addEventListener('click', function () {
            if (!scene || !btn) return;
            var on = scene.getAttribute('data-enabled') === 'on';
            scene.setAttribute('data-enabled', on ? 'off' : 'on');
            update();
          });
          update();
        });
      </script>
    </section>
    <div class="dg-vignette" aria-hidden="true">
      <span class="dg-leaf dg-leaf-a"></span>
      <span class="dg-leaf dg-leaf-b"></span>
      <span class="dg-leaf dg-leaf-c"></span>
    </div>
  </div>
</BaseLayout>


