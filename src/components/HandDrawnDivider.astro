---
export interface Props {
  variant?: 'vine' | 'simple' | 'botanical' | 'ornate';
  width?: 'narrow' | 'medium' | 'wide' | 'full';
  className?: string;
}

const { 
  variant = 'vine',
  width = 'medium',
  className = ''
} = Astro.props;

const widthClasses = {
  narrow: 'w-32',
  medium: 'w-48', 
  wide: 'w-64',
  full: 'w-full'
};
---

<div class={`hand-drawn-divider ${widthClasses[width]} ${className}`}>
  {variant === 'vine' && (
    <svg class="divider-svg" viewBox="0 0 800 64" preserveAspectRatio="xMidYMid meet">
      <defs>
        <filter id="dividerTexture" x="0%" y="0%" width="100%" height="100%">
          <feTurbulence baseFrequency="0.03" numOctaves="2" result="noise" seed="3" />
          <feDisplacementMap in="SourceGraphic" in2="noise" scale="1" />
        </filter>
        <filter id="dividerShadow" x="0%" y="0%" width="120%" height="120%">
          <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
          <feOffset dx="1" dy="1" result="offset"/>
          <feFlood flood-color="rgba(139, 90, 60, 0.2)"/>
          <feComposite in2="offset" operator="in"/>
          <feMerge> 
            <feMergeNode/>
            <feMergeNode in="SourceGraphic"/> 
          </feMerge>
        </filter>
      </defs>
      
      <!-- Main vine line -->
      <path
        d="M80,32 Q200,20 400,36 T600,24 T720,32"
        stroke="rgba(139, 90, 60, 0.6)"
        stroke-width="3"
        fill="none"
        filter="url(#dividerTexture)"
      />
      
      <!-- Decorative leaves -->
      <g fill="rgba(90, 107, 71, 0.4)" filter="url(#dividerShadow)">
        <ellipse cx="260" cy="32" rx="8" ry="4" transform="rotate(30 260 32)" />
        <ellipse cx="258" cy="34" rx="5" ry="2.5" transform="rotate(30 258 34)" fill="rgba(139,69,19,0.3)" />
        <ellipse cx="520" cy="32" rx="7" ry="3.5" transform="rotate(-45 520 32)" />
        <ellipse cx="518" cy="34" rx="4" ry="2" transform="rotate(-45 518 34)" fill="rgba(139,69,19,0.3)" />
      </g>
      
      <!-- Small decorative dots -->
      <g fill="rgba(168, 181, 160, 0.5)">
        <circle cx="200" cy="32" r="2" />
        <circle cx="400" cy="32" r="1.5" />
        <circle cx="600" cy="32" r="1.8" />
      </g>
    </svg>
  )}
  
  {variant === 'simple' && (
    <svg class="divider-svg" viewBox="0 0 400 24" preserveAspectRatio="xMidYMid meet">
      <defs>
        <filter id="simpleTexture" x="0%" y="0%" width="100%" height="100%">
          <feTurbulence baseFrequency="0.05" numOctaves="1" result="noise" seed="5" />
          <feDisplacementMap in="SourceGraphic" in2="noise" scale="0.8" />
        </filter>
      </defs>
      
      <path
        d="M50,12 Q100,8 150,12 T250,12 T350,12"
        stroke="rgba(139, 90, 60, 0.5)"
        stroke-width="2"
        fill="none"
        filter="url(#simpleTexture)"
      />
      
      <!-- Central botanical element -->
      <g fill="rgba(90, 107, 71, 0.4)" transform="translate(200, 12)">
        <circle r="3" />
        <ellipse rx="8" ry="2" transform="rotate(45)" fill="rgba(139,69,19,0.3)" />
        <ellipse rx="8" ry="2" transform="rotate(-45)" fill="rgba(139,69,19,0.3)" />
      </g>
    </svg>
  )}
  
  {variant === 'botanical' && (
    <svg class="divider-svg" viewBox="0 0 500 60" preserveAspectRatio="xMidYMid meet">
      <defs>
        <filter id="botanicalTexture" x="0%" y="0%" width="100%" height="100%">
          <feTurbulence baseFrequency="0.02" numOctaves="3" result="noise" seed="7" />
          <feDisplacementMap in="SourceGraphic" in2="noise" scale="1.5" />
        </filter>
      </defs>
      
      <!-- Central stem -->
      <path
        d="M100,30 Q175,25 250,30 T400,30"
        stroke="rgba(139, 90, 60, 0.5)"
        stroke-width="3"
        fill="none"
        filter="url(#botanicalTexture)"
      />
      
      <!-- Leaves and flowers -->
      <g fill="rgba(90, 107, 71, 0.4)" filter="url(#botanicalTexture)">
        <!-- Left side -->
        <path d="M150,30 Q140,20 135,25 Q140,35 150,30" />
        <path d="M145,32 Q138,24 134,28 Q138,36 145,32" fill="rgba(139,69,19,0.25)" />
        
        <!-- Center flower -->
        <circle cx="250" cy="30" r="6" fill="rgba(168, 181, 160, 0.5)" />
        <circle cx="250" cy="30" r="4" fill="rgba(139,69,19,0.3)" />
        <circle cx="250" cy="30" r="2" fill="rgba(234, 179, 8, 0.6)" />
        
        <!-- Right side -->
        <path d="M350,30 Q360,20 365,25 Q360,35 350,30" />
        <path d="M355,32 Q362,24 366,28 Q362,36 355,32" fill="rgba(139,69,19,0.25)" />
      </g>
      
      <!-- Decorative tendrils -->
      <g stroke="rgba(90, 107, 71, 0.3)" stroke-width="1.5" fill="none" filter="url(#botanicalTexture)">
        <path d="M170,35 Q175,40 180,35 Q185,30 190,35" />
        <path d="M310,35 Q315,40 320,35 Q325,30 330,35" />
      </g>
    </svg>
  )}
  
  {variant === 'ornate' && (
    <svg class="divider-svg" viewBox="0 0 700 80" preserveAspectRatio="xMidYMid meet">
      <defs>
        <filter id="ornateTexture" x="0%" y="0%" width="100%" height="100%">
          <feTurbulence baseFrequency="0.025" numOctaves="2" result="noise" seed="9" />
          <feDisplacementMap in="SourceGraphic" in2="noise" scale="1.2" />
        </filter>
        <filter id="ornateShadow" x="0%" y="0%" width="120%" height="120%">
          <feGaussianBlur in="SourceAlpha" stdDeviation="2"/>
          <feOffset dx="2" dy="2" result="offset"/>
          <feFlood flood-color="rgba(139, 90, 60, 0.15)"/>
          <feComposite in2="offset" operator="in"/>
          <feMerge> 
            <feMergeNode/>
            <feMergeNode in="SourceGraphic"/> 
          </feMerge>
        </filter>
      </defs>
      
      <!-- Central decorative element -->
      <g transform="translate(350, 40)" filter="url(#ornateShadow)">
        <!-- Ornate center -->
        <circle r="12" fill="rgba(90, 107, 71, 0.3)" />
        <circle r="8" fill="rgba(168, 181, 160, 0.4)" />
        <circle r="4" fill="rgba(234, 179, 8, 0.6)" />
        
        <!-- Radiating elements -->
        <g stroke="rgba(139, 90, 60, 0.5)" stroke-width="2" fill="none">
          <path d="M-20,0 Q-15,-5 -10,0 Q-5,5 0,0" />
          <path d="M20,0 Q15,-5 10,0 Q5,5 0,0" />
          <path d="M0,-20 Q-5,-15 0,-10 Q5,-5 0,0" />
          <path d="M0,20 Q-5,15 0,10 Q5,5 0,0" />
        </g>
      </g>
      
      <!-- Extending vine patterns -->
      <path
        d="M100,40 Q200,30 300,45 Q350,40 400,45 Q500,30 600,40"
        stroke="rgba(139, 90, 60, 0.4)"
        stroke-width="2.5"
        fill="none"
        filter="url(#ornateTexture)"
      />
      
      <!-- Side decorations -->
      <g fill="rgba(90, 107, 71, 0.3)" filter="url(#ornateTexture)">
        <ellipse cx="150" cy="40" rx="8" ry="4" transform="rotate(20 150 40)" />
        <ellipse cx="550" cy="40" rx="8" ry="4" transform="rotate(-20 550 40)" />
      </g>
    </svg>
  )}
</div>

<style>
  .hand-drawn-divider {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: var(--space-lg) auto;
  }

  .divider-svg {
    width: 100%;
    height: auto;
    filter: drop-shadow(0 1px 2px rgba(139, 90, 60, 0.1));
    shape-rendering: geometricPrecision;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }

  /* Responsive sizing */
  @media (max-width: 768px) {
    .hand-drawn-divider {
      margin: var(--space-md) auto;
    }
    
    .hand-drawn-divider.w-64,
    .hand-drawn-divider.w-48 {
      @apply w-32;
    }
  }

  @media (max-width: 480px) {
    .hand-drawn-divider.w-32 {
      @apply w-24;
    }
  }
</style>